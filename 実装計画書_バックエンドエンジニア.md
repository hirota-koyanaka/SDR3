# å®Ÿè£…è¨ˆç”»æ›¸ - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢

## 1. æ‹…å½“ç¯„å›²æ¦‚è¦

### ä¸»è¦è²¬ä»»
- FastAPI ã«ã‚ˆã‚‹RESTful APIé–‹ç™º
- Supabaseã¨ã®é€£æºå®Ÿè£…
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†
- èªè¨¼ãƒ»èªå¯ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **è¨€èª**: Python 3.11+
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: FastAPI
- **ORM**: SQLAlchemy
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase (PostgreSQL)
- **èªè¨¼**: Supabase Auth + JWT
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Supabase Storage
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercel Serverless Functions

## 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                    # FastAPIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py           # èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py          # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ applications.py   # ç”³è«‹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ dogs.py           # çŠ¬æƒ…å ±ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ posts.py          # SNSæŠ•ç¨¿
â”‚   â”‚   â”‚   â”œâ”€â”€ events.py         # ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py          # ç®¡ç†è€…æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ entries.py        # å…¥é€€å ´ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ announcements.py  # ãŠçŸ¥ã‚‰ã›ç®¡ç†
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py              # ç’°å¢ƒè¨­å®š
â”‚   â”‚   â”œâ”€â”€ security.py            # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
â”‚   â”‚   â”œâ”€â”€ database.py            # DBæ¥ç¶š
â”‚   â”‚   â””â”€â”€ supabase.py           # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ models/                    # SQLAlchemyãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ schemas/                   # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ services/                  # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ utils/                     # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ alembic/                       # DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ tests/
â”œâ”€â”€ requirements.txt
â””â”€â”€ .env.example
```

## 3. é€±æ¬¡å®Ÿè£…è¨ˆç”»

### ğŸš€ Week 0: ç’°å¢ƒæ§‹ç¯‰ï¼ˆ3æ—¥é–“ï¼‰

#### Day 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
mkdir backend && cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install fastapi uvicorn[standard]
pip install sqlalchemy alembic psycopg2-binary
pip install python-jose[cryptography] passlib[bcrypt]
pip install python-multipart aiofiles
pip install supabase
pip install pytest pytest-asyncio httpx
```

**requirements.txtä½œæˆ**:
```txt
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
alembic==1.13.1
psycopg2-binary==2.9.9
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6
aiofiles==23.2.1
supabase==2.3.4
pydantic==2.5.3
pydantic-settings==2.1.0
pytest==7.4.4
pytest-asyncio==0.23.3
httpx==0.26.0
```

#### Day 2: Supabaseè¨­å®šã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
```python
# core/config.py
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # Supabase
    SUPABASE_URL: str
    SUPABASE_ANON_KEY: str
    SUPABASE_SERVICE_KEY: str
    
    # JWT
    SECRET_KEY: str
    ALGORITHM: str = "HS256"
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30
    
    # CORS
    BACKEND_CORS_ORIGINS: list = ["http://localhost:3000"]
    
    class Config:
        env_file = ".env"

settings = Settings()
```

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ**:
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆSupabase Authé€£æºï¼‰
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    auth_id UUID UNIQUE NOT NULL,  -- Supabase Auth ID
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    address TEXT,
    is_imabari_resident BOOLEAN DEFAULT false,
    residence_years INTEGER,
    status VARCHAR(20) DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ç”³è«‹ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE applications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    address TEXT NOT NULL,
    is_imabari_resident BOOLEAN NOT NULL,
    residence_years INTEGER,
    status VARCHAR(20) DEFAULT 'pending',
    admin_memo TEXT,
    rejected_reason TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    reviewed_at TIMESTAMP,
    reviewed_by UUID REFERENCES admin_users(id)
);

-- ç®¡ç†è€…ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE admin_users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    auth_id UUID UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    role VARCHAR(20) NOT NULL, -- 'admin' or 'super_admin'
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- çŠ¬æƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE dogs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    breed VARCHAR(100),
    weight DECIMAL(5,2),
    gender VARCHAR(10),
    birth_date DATE,
    personality TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨˜éŒ²
CREATE TABLE vaccination_records (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    dog_id UUID REFERENCES dogs(id) ON DELETE CASCADE,
    vaccine_type VARCHAR(100) NOT NULL,
    vaccination_date DATE NOT NULL,
    certificate_url TEXT,
    next_vaccination_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Day 3: åŸºæœ¬è¨­å®šã¨CORS
```python
# main.py
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.core.config import settings

app = FastAPI(
    title="é‡Œå±±ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ API",
    version="1.0.0",
    docs_url="/api/docs",
    redoc_url="/api/redoc"
)

app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.BACKEND_CORS_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/api/health")
async def health_check():
    return {"status": "healthy"}
```

### ğŸ“… Week 1: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

#### æœˆæ›œæ—¥-ç«æ›œæ—¥: Supabase Authé€£æº
```python
# core/supabase.py
from supabase import create_client, Client
from app.core.config import settings

supabase: Client = create_client(
    settings.SUPABASE_URL,
    settings.SUPABASE_SERVICE_KEY
)

# services/auth_service.py
from app.core.supabase import supabase
from app.schemas.auth import UserCreate, Token
from fastapi import HTTPException

class AuthService:
    @staticmethod
    async def register_user(user_data: UserCreate):
        try:
            # Supabase Authã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
            auth_response = supabase.auth.sign_up({
                "email": user_data.email,
                "password": user_data.password
            })
            
            # DBã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ä¿å­˜
            user_record = {
                "auth_id": auth_response.user.id,
                "email": user_data.email,
                "name": user_data.name,
                "phone": user_data.phone,
                "address": user_data.address
            }
            
            db_response = supabase.table("users").insert(user_record).execute()
            return db_response.data[0]
            
        except Exception as e:
            raise HTTPException(status_code=400, detail=str(e))
    
    @staticmethod
    async def login(email: str, password: str):
        try:
            response = supabase.auth.sign_in_with_password({
                "email": email,
                "password": password
            })
            return {
                "access_token": response.session.access_token,
                "refresh_token": response.session.refresh_token,
                "token_type": "bearer"
            }
        except Exception as e:
            raise HTTPException(status_code=401, detail="èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ")
```

#### æ°´æ›œæ—¥: èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…
```python
# api/v1/auth.py
from fastapi import APIRouter, Depends, HTTPException
from app.schemas.auth import UserCreate, UserLogin, Token
from app.services.auth_service import AuthService

router = APIRouter(prefix="/api/v1/auth", tags=["èªè¨¼"])

@router.post("/register", response_model=dict)
async def register(user_data: UserCreate):
    """æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²"""
    return await AuthService.register_user(user_data)

@router.post("/login", response_model=Token)
async def login(credentials: UserLogin):
    """ãƒ­ã‚°ã‚¤ãƒ³"""
    return await AuthService.login(
        credentials.email, 
        credentials.password
    )

@router.post("/refresh")
async def refresh_token(refresh_token: str):
    """ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥"""
    # å®Ÿè£…

@router.post("/logout")
async def logout(token: str = Depends(get_current_user)):
    """ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"""
    # å®Ÿè£…
```

#### æœ¨æ›œæ—¥-é‡‘æ›œæ—¥: èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ãƒ†ã‚¹ãƒˆ
```python
# core/security.py
from fastapi import Depends, HTTPException, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from app.core.supabase import supabase

security = HTTPBearer()

async def get_current_user(credentials: HTTPAuthorizationCredentials = Depends(security)):
    token = credentials.credentials
    try:
        # Supabaseã§ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
        user = supabase.auth.get_user(token)
        if not user:
            raise HTTPException(
                status_code=status.HTTP_401_UNAUTHORIZED,
                detail="Invalid authentication credentials"
            )
        return user
    except Exception:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid authentication credentials"
        )

# ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
async def require_admin(current_user = Depends(get_current_user)):
    admin = supabase.table("admin_users").select("*").eq("auth_id", current_user.id).execute()
    if not admin.data:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™"
        )
    return admin.data[0]
```

### ğŸ“… Week 2: ç”³è«‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

#### æœˆæ›œæ—¥-ç«æ›œæ—¥: ç”³è«‹ãƒ¢ãƒ‡ãƒ«ã¨ã‚¹ã‚­ãƒ¼ãƒ
```python
# schemas/application.py
from pydantic import BaseModel, EmailStr
from typing import Optional
from datetime import datetime
from enum import Enum

class ApplicationStatus(str, Enum):
    PENDING = "pending"
    APPROVED = "approved"
    REJECTED = "rejected"

class ApplicationCreate(BaseModel):
    email: EmailStr
    name: str
    phone: str
    address: str
    is_imabari_resident: bool
    residence_years: Optional[int]
    dog_info: dict  # çŠ¬ã®æƒ…å ±
    preferred_date: Optional[datetime]

class ApplicationUpdate(BaseModel):
    status: ApplicationStatus
    admin_memo: Optional[str]
    rejected_reason: Optional[str]

# services/application_service.py
class ApplicationService:
    @staticmethod
    async def create_application(data: ApplicationCreate):
        # ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        # Supabase Storageã‚’ä½¿ç”¨
        
        application = {
            "email": data.email,
            "name": data.name,
            "phone": data.phone,
            "address": data.address,
            "is_imabari_resident": data.is_imabari_resident,
            "residence_years": data.residence_years,
            "status": ApplicationStatus.PENDING
        }
        
        result = supabase.table("applications").insert(application).execute()
        
        # ç®¡ç†è€…ã«é€šçŸ¥ï¼ˆãƒ¡ãƒ¼ãƒ« or ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼‰
        await NotificationService.notify_admin_new_application(result.data[0])
        
        return result.data[0]
```

#### æ°´æ›œæ—¥: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
```python
# api/v1/files.py
from fastapi import APIRouter, UploadFile, File
from app.core.supabase import supabase
import uuid

router = APIRouter(prefix="/api/v1/files", tags=["ãƒ•ã‚¡ã‚¤ãƒ«"])

@router.post("/upload/vaccination-certificate")
async def upload_vaccination_certificate(
    file: UploadFile = File(...),
    current_user = Depends(get_current_user)
):
    """ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"""
    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ï¼ˆ5MBä»¥ä¸‹ï¼‰
    if file.size > 5 * 1024 * 1024:
        raise HTTPException(status_code=400, detail="ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯5MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„")
    
    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
    allowed_types = ["image/jpeg", "image/png", "application/pdf"]
    if file.content_type not in allowed_types:
        raise HTTPException(status_code=400, detail="JPGã€PNGã€PDFãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™")
    
    # Supabase Storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    file_name = f"vaccination/{current_user.id}/{uuid.uuid4()}{file.filename}"
    file_data = await file.read()
    
    response = supabase.storage.from_("documents").upload(
        file_name,
        file_data,
        {"content-type": file.content_type}
    )
    
    # Public URLã‚’å–å¾—
    public_url = supabase.storage.from_("documents").get_public_url(file_name)
    
    return {"url": public_url, "file_name": file_name}
```

#### æœ¨æ›œæ—¥-é‡‘æ›œæ—¥: ç”³è«‹APIå®Œæˆã¨ãƒ†ã‚¹ãƒˆ
```python
# api/v1/applications.py
from fastapi import APIRouter, Depends, Query
from typing import List, Optional
from app.schemas.application import ApplicationCreate, ApplicationUpdate

router = APIRouter(prefix="/api/v1/applications", tags=["ç”³è«‹ç®¡ç†"])

@router.post("/", response_model=dict)
async def create_application(data: ApplicationCreate):
    """åˆ©ç”¨ç”³è«‹ä½œæˆ"""
    return await ApplicationService.create_application(data)

@router.get("/{application_id}")
async def get_application(application_id: str):
    """ç”³è«‹è©³ç´°å–å¾—"""
    result = supabase.table("applications").select("*").eq("id", application_id).execute()
    if not result.data:
        raise HTTPException(status_code=404, detail="ç”³è«‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    return result.data[0]

@router.get("/status/{email}")
async def check_application_status(email: str):
    """ç”³è«‹çŠ¶æ³ç¢ºèªï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§æ¤œç´¢ï¼‰"""
    result = supabase.table("applications").select("*").eq("email", email).order("created_at", desc=True).execute()
    return result.data

# ç®¡ç†è€…ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
@router.get("/admin/list")
async def list_applications(
    status: Optional[str] = Query(None),
    limit: int = Query(20, le=100),
    offset: int = Query(0),
    admin_user = Depends(require_admin)
):
    """ç”³è«‹ä¸€è¦§å–å¾—ï¼ˆç®¡ç†è€…ç”¨ï¼‰"""
    query = supabase.table("applications").select("*")
    
    if status:
        query = query.eq("status", status)
    
    result = query.order("created_at", desc=True).limit(limit).offset(offset).execute()
    return result.data

@router.put("/admin/{application_id}/approve")
async def approve_application(
    application_id: str,
    admin_memo: Optional[str] = None,
    admin_user = Depends(require_admin)
):
    """ç”³è«‹æ‰¿èª"""
    # ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†
    # 1. ç”³è«‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
    # 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
    # 3. æ‰¿èªãƒ¡ãƒ¼ãƒ«é€ä¿¡
    pass

@router.put("/admin/{application_id}/reject")
async def reject_application(
    application_id: str,
    reason: str,
    admin_user = Depends(require_admin)
):
    """ç”³è«‹å´ä¸‹"""
    pass
```

### ğŸ“… Week 3: çŠ¬æƒ…å ±ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

#### æœˆæ›œæ—¥-ç«æ›œæ—¥: çŠ¬æƒ…å ±CRUD
```python
# schemas/dog.py
from pydantic import BaseModel
from typing import Optional
from datetime import date

class DogCreate(BaseModel):
    name: str
    breed: Optional[str]
    weight: Optional[float]
    gender: Optional[str]
    birth_date: Optional[date]
    personality: Optional[str]

class VaccinationRecord(BaseModel):
    vaccine_type: str
    vaccination_date: date
    certificate_url: str
    next_vaccination_date: Optional[date]

# api/v1/dogs.py
@router.post("/")
async def create_dog(
    dog_data: DogCreate,
    current_user = Depends(get_current_user)
):
    """çŠ¬æƒ…å ±ç™»éŒ²"""
    dog = {**dog_data.dict(), "user_id": current_user.id}
    result = supabase.table("dogs").insert(dog).execute()
    return result.data[0]

@router.get("/my-dogs")
async def get_my_dogs(current_user = Depends(get_current_user)):
    """è‡ªåˆ†ã®çŠ¬ä¸€è¦§å–å¾—"""
    result = supabase.table("dogs").select("*, vaccination_records(*)").eq("user_id", current_user.id).execute()
    return result.data

@router.post("/{dog_id}/vaccination")
async def add_vaccination_record(
    dog_id: str,
    record: VaccinationRecord,
    current_user = Depends(get_current_user)
):
    """ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®è¨˜éŒ²è¿½åŠ """
    # çŠ¬ã®æ‰€æœ‰è€…ç¢ºèª
    dog = supabase.table("dogs").select("*").eq("id", dog_id).eq("user_id", current_user.id).execute()
    if not dog.data:
        raise HTTPException(status_code=403, detail="ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“")
    
    vaccination = {**record.dict(), "dog_id": dog_id}
    result = supabase.table("vaccination_records").insert(vaccination).execute()
    return result.data[0]
```

#### æ°´æ›œæ—¥-é‡‘æ›œæ—¥: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†
```python
# api/v1/users.py
@router.get("/profile")
async def get_profile(current_user = Depends(get_current_user)):
    """ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—"""
    user = supabase.table("users").select("*, dogs(*)").eq("auth_id", current_user.id).execute()
    return user.data[0]

@router.put("/profile")
async def update_profile(
    profile_data: UserProfileUpdate,
    current_user = Depends(get_current_user)
):
    """ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°"""
    result = supabase.table("users").update(profile_data.dict()).eq("auth_id", current_user.id).execute()
    return result.data[0]

# ç®¡ç†è€…ç”¨
@router.get("/admin/users")
async def list_users(
    admin_user = Depends(require_admin),
    status: Optional[str] = None,
    limit: int = 20,
    offset: int = 0
):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—"""
    query = supabase.table("users").select("*, dogs(*)")
    if status:
        query = query.eq("status", status)
    result = query.limit(limit).offset(offset).execute()
    return result.data
```

### ğŸ“… Week 4-5: SNSæ©Ÿèƒ½ã¨ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†

#### SNSæŠ•ç¨¿API
```python
# schemas/post.py
class PostCreate(BaseModel):
    content: str
    hashtags: List[str] = []
    images: List[str] = []
    category: str

# api/v1/posts.py
@router.post("/")
async def create_post(
    post_data: PostCreate,
    current_user = Depends(get_current_user)
):
    """æŠ•ç¨¿ä½œæˆ"""
    post = {
        "user_id": current_user.id,
        "content": post_data.content,
        "category": post_data.category,
        "status": "pending"  # ç®¡ç†è€…æ‰¿èªå¾…ã¡
    }
    result = supabase.table("posts").insert(post).execute()
    
    # ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°å‡¦ç†
    for tag in post_data.hashtags:
        hashtag = supabase.table("hashtags").upsert({"name": tag}).execute()
        supabase.table("post_hashtags").insert({
            "post_id": result.data[0]["id"],
            "hashtag_id": hashtag.data[0]["id"]
        }).execute()
    
    return result.data[0]

@router.get("/feed")
async def get_feed(
    category: Optional[str] = None,
    hashtag: Optional[str] = None,
    limit: int = 20,
    offset: int = 0
):
    """ãƒ•ã‚£ãƒ¼ãƒ‰å–å¾—"""
    query = supabase.table("posts").select(
        "*, users(name, avatar_url), likes(user_id), comments(count)"
    ).eq("status", "approved")
    
    if category:
        query = query.eq("category", category)
    
    result = query.order("created_at", desc=True).limit(limit).offset(offset).execute()
    return result.data

@router.post("/{post_id}/like")
async def toggle_like(
    post_id: str,
    current_user = Depends(get_current_user)
):
    """ã„ã„ã­åˆ‡ã‚Šæ›¿ãˆ"""
    existing = supabase.table("likes").select("*").eq("post_id", post_id).eq("user_id", current_user.id).execute()
    
    if existing.data:
        # ã„ã„ã­è§£é™¤
        supabase.table("likes").delete().eq("id", existing.data[0]["id"]).execute()
        return {"liked": False}
    else:
        # ã„ã„ã­è¿½åŠ 
        supabase.table("likes").insert({"post_id": post_id, "user_id": current_user.id}).execute()
        return {"liked": True}
```

#### ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†API
```python
# api/v1/events.py
@router.post("/admin/events")
async def create_event(
    event_data: EventCreate,
    admin_user = Depends(require_admin)
):
    """ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆï¼ˆç®¡ç†è€…ï¼‰"""
    event = {
        **event_data.dict(),
        "created_by": admin_user["id"]
    }
    result = supabase.table("events").insert(event).execute()
    
    # å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥
    await NotificationService.notify_new_event(result.data[0])
    
    return result.data[0]

@router.get("/events")
async def get_events(
    start_date: Optional[date] = None,
    end_date: Optional[date] = None
):
    """ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§å–å¾—"""
    query = supabase.table("events").select("*, registrations(count)")
    
    if start_date:
        query = query.gte("event_date", start_date)
    if end_date:
        query = query.lte("event_date", end_date)
    
    result = query.order("event_date").execute()
    return result.data

@router.post("/events/{event_id}/register")
async def register_event(
    event_id: str,
    current_user = Depends(get_current_user)
):
    """ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ç™»éŒ²"""
    # å®šå“¡ãƒã‚§ãƒƒã‚¯
    event = supabase.table("events").select("*, registrations(count)").eq("id", event_id).execute()
    if event.data[0]["max_participants"] <= len(event.data[0]["registrations"]):
        raise HTTPException(status_code=400, detail="å®šå“¡ã«é”ã—ã¦ã„ã¾ã™")
    
    registration = {
        "event_id": event_id,
        "user_id": current_user.id,
        "status": "registered"
    }
    result = supabase.table("event_registrations").insert(registration).execute()
    return result.data[0]
```

### ğŸ“… Week 6-7: QRã‚³ãƒ¼ãƒ‰å…¥é€€å ´ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½

#### QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¨å…¥é€€å ´
```python
# services/qr_service.py
import qrcode
import io
import base64
from datetime import datetime, timedelta
import jwt

class QRService:
    @staticmethod
    async def generate_entry_qr(user_id: str, dog_ids: List[str]):
        """å…¥å ´ç”¨QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ"""
        # æœ‰åŠ¹æœŸé™ä»˜ããƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ
        payload = {
            "user_id": user_id,
            "dog_ids": dog_ids,
            "exp": datetime.utcnow() + timedelta(hours=24),
            "type": "entry"
        }
        
        token = jwt.encode(payload, settings.SECRET_KEY, algorithm=settings.ALGORITHM)
        
        # QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        qr = qrcode.QRCode(version=1, box_size=10, border=5)
        qr.add_data(token)
        qr.make(fit=True)
        
        img = qr.make_image(fill_color="black", back_color="white")
        
        # Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
        buffer = io.BytesIO()
        img.save(buffer, format="PNG")
        img_str = base64.b64encode(buffer.getvalue()).decode()
        
        return f"data:image/png;base64,{img_str}"

# api/v1/entries.py
@router.post("/check-in")
async def check_in(
    qr_token: str,
    admin_user = Depends(require_admin)
):
    """å…¥å ´å‡¦ç†ï¼ˆç®¡ç†è€…ãŒQRã‚¹ã‚­ãƒ£ãƒ³ï¼‰"""
    try:
        # ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
        payload = jwt.decode(qr_token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
        
        # é‡è¤‡å…¥å ´ãƒã‚§ãƒƒã‚¯
        existing = supabase.table("entry_logs").select("*").eq("user_id", payload["user_id"]).is_("exit_time", None).execute()
        if existing.data:
            raise HTTPException(status_code=400, detail="æ—¢ã«å…¥å ´æ¸ˆã¿ã§ã™")
        
        # å…¥å ´è¨˜éŒ²ä½œæˆ
        for dog_id in payload["dog_ids"]:
            entry = {
                "user_id": payload["user_id"],
                "dog_id": dog_id,
                "entry_time": datetime.utcnow().isoformat(),
                "checked_by": admin_user["id"]
            }
            supabase.table("entry_logs").insert(entry).execute()
        
        # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥
        await broadcast_entry_update()
        
        return {"status": "success", "message": "å…¥å ´å‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸ"}
        
    except jwt.ExpiredSignatureError:
        raise HTTPException(status_code=400, detail="QRã‚³ãƒ¼ãƒ‰ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™")
    except jwt.InvalidTokenError:
        raise HTTPException(status_code=400, detail="ç„¡åŠ¹ãªQRã‚³ãƒ¼ãƒ‰ã§ã™")

@router.get("/current-visitors")
async def get_current_visitors():
    """ç¾åœ¨ã®åˆ©ç”¨è€…ä¸€è¦§"""
    result = supabase.table("entry_logs").select(
        "*, users(name), dogs(name, breed)"
    ).is_("exit_time", None).execute()
    
    return {
        "count": len(result.data),
        "visitors": result.data
    }
```

#### Supabase Realtimeé€£æº
```python
# services/realtime_service.py
from app.core.supabase import supabase

class RealtimeService:
    @staticmethod
    async def setup_realtime_listeners():
        """ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼è¨­å®š"""
        # æ–°è¦æŠ•ç¨¿ã®ç›£è¦–
        channel = supabase.channel('posts')
        channel.on(
            'postgres_changes',
            schema='public',
            table='posts',
            event='INSERT',
            callback=handle_new_post
        ).subscribe()
        
        # å…¥é€€å ´ã®ç›£è¦–
        entry_channel = supabase.channel('entries')
        entry_channel.on(
            'postgres_changes',
            schema='public',
            table='entry_logs',
            event='*',
            callback=handle_entry_update
        ).subscribe()

async def handle_new_post(payload):
    """æ–°è¦æŠ•ç¨¿å‡¦ç†"""
    print(f"New post: {payload}")
    # å¿…è¦ã«å¿œã˜ã¦é€šçŸ¥é€ä¿¡

async def handle_entry_update(payload):
    """å…¥é€€å ´æ›´æ–°å‡¦ç†"""
    print(f"Entry update: {payload}")
    # ç¾åœ¨ã®åˆ©ç”¨è€…æ•°ã‚’æ›´æ–°
```

### ğŸ“… Week 8: ãŠçŸ¥ã‚‰ã›ãƒ»å–¶æ¥­æ™‚é–“ç®¡ç†

```python
# api/v1/announcements.py
@router.post("/admin/announcements")
async def create_announcement(
    data: AnnouncementCreate,
    admin_user = Depends(require_admin)
):
    """ãŠçŸ¥ã‚‰ã›ä½œæˆ"""
    announcement = {
        **data.dict(),
        "created_by": admin_user["id"]
    }
    result = supabase.table("announcements").insert(announcement).execute()
    
    # ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡ï¼ˆå„ªå…ˆåº¦ãŒhighä»¥ä¸Šã®å ´åˆï¼‰
    if data.priority in ["high", "urgent"]:
        await NotificationService.send_push_notification(result.data[0])
    
    return result.data[0]

# api/v1/business_hours.py
@router.put("/admin/business-hours")
async def update_business_hours(
    hours: BusinessHoursUpdate,
    admin_user = Depends(require_admin)
):
    """å–¶æ¥­æ™‚é–“æ›´æ–°"""
    for day, time_range in hours.dict().items():
        supabase.table("business_hours").upsert({
            "day_of_week": day,
            "open_time": time_range["open"],
            "close_time": time_range["close"],
            "is_closed": time_range.get("is_closed", False)
        }).execute()
    
    return {"message": "å–¶æ¥­æ™‚é–“ã‚’æ›´æ–°ã—ã¾ã—ãŸ"}

@router.post("/admin/special-holidays")
async def add_special_holiday(
    holiday: SpecialHoliday,
    admin_user = Depends(require_admin)
):
    """ç‰¹åˆ¥ä¼‘æ¥­æ—¥è¿½åŠ """
    result = supabase.table("special_holidays").insert(holiday.dict()).execute()
    return result.data[0]
```

### ğŸ“… Week 9-10: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã¨ãƒ†ã‚¹ãƒˆ

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
```python
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…
from functools import lru_cache
import redis
import json

redis_client = redis.Redis.from_url(settings.REDIS_URL)

class CacheService:
    @staticmethod
    async def get_or_set(key: str, func, ttl: int = 300):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥å–å¾—ã¾ãŸã¯è¨­å®š"""
        cached = redis_client.get(key)
        if cached:
            return json.loads(cached)
        
        result = await func()
        redis_client.setex(key, ttl, json.dumps(result))
        return result

# ä½¿ç”¨ä¾‹
@router.get("/events/popular")
async def get_popular_events():
    return await CacheService.get_or_set(
        "popular_events",
        lambda: supabase.table("events").select("*").order("registrations_count", desc=True).limit(5).execute().data,
        ttl=600
    )
```

#### ãƒ†ã‚¹ãƒˆå®Ÿè£…
```python
# tests/test_auth.py
import pytest
from httpx import AsyncClient
from app.main import app

@pytest.mark.asyncio
async def test_register():
    async with AsyncClient(app=app, base_url="http://test") as client:
        response = await client.post("/api/v1/auth/register", json={
            "email": "test@example.com",
            "password": "TestPass123!",
            "name": "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼",
            "phone": "090-1234-5678",
            "address": "æ„›åª›çœŒä»Šæ²»å¸‚"
        })
        assert response.status_code == 200
        assert "id" in response.json()

@pytest.mark.asyncio
async def test_login():
    async with AsyncClient(app=app, base_url="http://test") as client:
        response = await client.post("/api/v1/auth/login", json={
            "email": "test@example.com",
            "password": "TestPass123!"
        })
        assert response.status_code == 200
        assert "access_token" in response.json()

# tests/test_applications.py
@pytest.mark.asyncio
async def test_create_application():
    # ç”³è«‹ä½œæˆãƒ†ã‚¹ãƒˆ
    pass

@pytest.mark.asyncio
async def test_approve_application():
    # æ‰¿èªå‡¦ç†ãƒ†ã‚¹ãƒˆ
    pass
```

### ğŸ“… Week 11-12: ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

#### Vercel ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
```python
# api/index.py (Vercelç”¨ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ)
from app.main import app

# Vercelã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ã¨ã—ã¦å‹•ä½œ
handler = app
```

**vercel.json**:
```json
{
  "builds": [
    {
      "src": "api/index.py",
      "use": "@vercel/python"
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "api/index.py"
    }
  ]
}
```

#### APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
```python
# main.py ã«è¿½åŠ 
from fastapi import FastAPI
from fastapi.openapi.utils import get_openapi

def custom_openapi():
    if app.openapi_schema:
        return app.openapi_schema
    
    openapi_schema = get_openapi(
        title="é‡Œå±±ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ API",
        version="1.0.0",
        description="æ„›åª›çœŒä»Šæ²»å¸‚ã®é‡Œå±±ãƒ‰ãƒƒã‚°ãƒ©ãƒ³å‘ã‘API",
        routes=app.routes,
    )
    
    # ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°
    openapi_schema["tags"] = [
        {"name": "èªè¨¼", "description": "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼é–¢é€£"},
        {"name": "ç”³è«‹ç®¡ç†", "description": "åˆ©ç”¨ç”³è«‹ã®ä½œæˆã¨ç®¡ç†"},
        {"name": "çŠ¬æƒ…å ±", "description": "çŠ¬ã®ç™»éŒ²ã¨ç®¡ç†"},
        {"name": "SNS", "description": "æŠ•ç¨¿ã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ©Ÿèƒ½"},
        {"name": "ã‚¤ãƒ™ãƒ³ãƒˆ", "description": "ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†"},
        {"name": "ç®¡ç†è€…", "description": "ç®¡ç†è€…å°‚ç”¨æ©Ÿèƒ½"}
    ]
    
    app.openapi_schema = openapi_schema
    return app.openapi_schema

app.openapi = custom_openapi
```

## 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®é€£æºãƒã‚¤ãƒ³ãƒˆ

### APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ | èªè¨¼ |
|---------------|---------|------|------|
| `/api/v1/auth/register` | POST | æ–°è¦ç™»éŒ² | ä¸è¦ |
| `/api/v1/auth/login` | POST | ãƒ­ã‚°ã‚¤ãƒ³ | ä¸è¦ |
| `/api/v1/applications` | POST | ç”³è«‹ä½œæˆ | ä¸è¦ |
| `/api/v1/applications/status/{email}` | GET | ç”³è«‹çŠ¶æ³ç¢ºèª | ä¸è¦ |
| `/api/v1/users/profile` | GET | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾— | å¿…è¦ |
| `/api/v1/dogs` | GET/POST | çŠ¬æƒ…å ±ç®¡ç† | å¿…è¦ |
| `/api/v1/posts/feed` | GET | ãƒ•ã‚£ãƒ¼ãƒ‰å–å¾— | ä¸è¦ |
| `/api/v1/posts` | POST | æŠ•ç¨¿ä½œæˆ | å¿…è¦ |
| `/api/v1/events` | GET | ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ | ä¸è¦ |
| `/api/v1/entries/qr` | GET | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ | å¿…è¦ |
| `/api/v1/admin/*` | ALL | ç®¡ç†è€…æ©Ÿèƒ½ | ç®¡ç†è€… |

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "data": {},
  "message": "æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "status": "success"
}
```

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "detail": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "status_code": 400
}
```

## 5. æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Week 1-2
- [ ] èªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ
- [ ] ç”³è«‹ç®¡ç†APIå®Œæˆ
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- [ ] åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆ

### Week 3-4
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»çŠ¬æƒ…å ±ç®¡ç†å®Œæˆ
- [ ] ç®¡ç†è€…æ©Ÿèƒ½åŸºæœ¬å®Ÿè£…
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆå®Œäº†

### Week 5-7
- [ ] SNSæ©Ÿèƒ½å®Œæˆ
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†å®Œæˆ
- [ ] QRã‚³ãƒ¼ãƒ‰å…¥é€€å ´å®Ÿè£…
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½

### Week 8-10
- [ ] ãŠçŸ¥ã‚‰ã›æ©Ÿèƒ½
- [ ] å–¶æ¥­æ™‚é–“ç®¡ç†
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] å…¨æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

### Week 11-12
- [ ] Vercelãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
- [ ] APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆ
- [ ] è² è·ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»

## 6. æ³¨æ„äº‹é …

1. **Supabaseé€£æº**
   - Service Keyã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
   - Row Level Security (RLS)ã®è¨­å®š
   - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®šç¢ºèª

2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
   - ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å…¥åŠ›æ¤œè¨¼
   - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
   - ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - N+1å•é¡Œã®å›é¿
   - é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®å”èª¿**
   - APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®éšæ™‚æ›´æ–°
   - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®æä¾›
   - CORSè¨­å®šã®ç¢ºèª