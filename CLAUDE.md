# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## é‡è¦ãªãƒ«ãƒ¼ãƒ«

**ã™ã¹ã¦ã®ã‚„ã‚Šå–ã‚Šã¯æ—¥æœ¬èªã§è¡Œã†ã“ã¨ã€‚** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã¯ã™ã¹ã¦æ—¥æœ¬èªã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

## é–‹ç™ºé€²è¡Œãƒ«ãƒ¼ãƒ«

### è‡ªå¾‹çš„ãªé–‹ç™ºæ¨é€²
ç¾åœ¨ã€4åã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰Aã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰Bã€UI/UXãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ï¼‰ã«ã‚ˆã‚‹ä¸¦è¡Œé–‹ç™ºãŒé€²è¡Œä¸­ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦é–‹ç™ºã‚’é€²ã‚ã¦ãã ã•ã„ï¼š

### âœ… ç¢ºèªä¸è¦ã§é€²ã‚ã¦è‰¯ã„ä½œæ¥­
ä»¥ä¸‹ã®ä½œæ¥­ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ç¢ºèªãªã—ã«è‡ªå¾‹çš„ã«é€²ã‚ã¦ãã ã•ã„ï¼š

1. **å„å®Ÿè£…è¨ˆç”»æ›¸ã«è¨˜è¼‰ã•ã‚ŒãŸä½œæ¥­**
   - é€±æ¬¡ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã«æ²¿ã£ãŸå®Ÿè£…
   - è¨ˆç”»æ›¸å†…ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã®å®Ÿè£…
   - æƒ³å®šã•ã‚Œã‚‹åŸºæœ¬æ©Ÿèƒ½ã®å®Ÿè£…

2. **æŠ€è¡“çš„ãªæœ€é©åŒ–**
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
   - ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è¿½åŠ 
   - ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆ

3. **æ˜ã‚‰ã‹ãªãƒã‚°ä¿®æ­£**
   - æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£
   - å‹ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆ
   - ãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£

4. **é–‹ç™ºç’°å¢ƒã®æ•´å‚™**
   - å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
   - é–‹ç™ºãƒ„ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### âš ï¸ ç¢ºèªãŒå¿…è¦ãªä½œæ¥­
ä»¥ä¸‹ã®å ´åˆã¯å¿…ãšãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’å–ã£ã¦ãã ã•ã„ï¼š

1. **ä»•æ§˜ã®å¤§å¹…ãªå¤‰æ›´**
   - è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰é€¸è„±ã™ã‚‹å¤‰æ›´
   - UIãƒ•ãƒ­ãƒ¼ã®æ ¹æœ¬çš„ãªå¤‰æ›´
   - ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å¤§è¦æ¨¡ãªå¤‰æ›´

2. **å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®è¿½åŠ **
   - æ–°ã—ã„æœ‰æ–™ã‚µãƒ¼ãƒ“ã‚¹ã®å°å…¥
   - è¨ˆç”»ã«ãªã„å¤–éƒ¨APIã®åˆ©ç”¨
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã‚ã‚‹å¤‰æ›´

3. **ã‚³ã‚¹ãƒˆå½±éŸ¿ã®ã‚ã‚‹æ±ºå®š**
   - æœ‰æ–™ãƒ—ãƒ©ãƒ³ã¸ã®å¤‰æ›´
   - ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®å¤§å¹…ãªå¢—åŠ 

### ğŸ’¡ é–‹ç™ºã®é€²ã‚æ–¹
1. **å®Ÿè£…è¨ˆç”»æ›¸ã‚’åŸºæº–ã«ä½œæ¥­ã‚’é€²ã‚ã‚‹**
2. **ä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã€ã¾ãšæŠ€è¡“çš„ã«å¦¥å½“ãªåˆ¤æ–­ã§é€²ã‚ã‚‹**
3. **é‡å¤§ãªãƒªã‚¹ã‚¯ãŒã‚ã‚‹å ´åˆã®ã¿ç¢ºèªã‚’æ±‚ã‚ã‚‹**
4. **å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã¯éƒ½åº¦å ±å‘Šã™ã‚‹**

### ğŸ”„ ä¸¦è¡Œé–‹ç™ºã§ã®æ³¨æ„ç‚¹
- ä»–ãƒãƒ¼ãƒ ã®ä½œæ¥­ã«å½±éŸ¿ã™ã‚‹å¤‰æ›´ã¯ã€å¤‰æ›´å†…å®¹ã‚’æ˜ç¢ºã«è¨˜éŒ²
- APIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯å®Ÿè£…è¨ˆç”»æ›¸ã®ä»•æ§˜ã‚’å³å®ˆ
- å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤‰æ›´ã¯å½±éŸ¿ç¯„å›²ã‚’è€ƒæ…®

## Project Overview

This is the é‡Œå±±ãƒ‰ãƒƒã‚°ãƒ©ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  (Satoyama Dog Run Management System) - a web application for managing a dog park facility in Imabari City, Ehime Prefecture, Japan.

**Status**: Initial development phase - no code implementation yet, only requirements documentation exists.

## System Architecture (Planned)

### Technology Stack

**Backend**:
- Framework: FastAPI (Python)
- ORM: SQLAlchemy
- Authentication: Supabase Auth + JWT
- Database: Supabase PostgreSQL (development & production)

**Frontend**:
- Framework: Next.js 14 (TypeScript)
- UI Library: Radix UI
- Styling: Tailwind CSS
- State Management: React Context API
- HTTP Client: Supabase Client + Axios

**Deployment**:
- Frontend: Vercel
- Backend: Vercel Serverless Functions
- Database: Supabase (PostgreSQL)
- Storage: Supabase Storage
- Realtime: Supabase Realtime

## Project Structure (To Be Implemented)

Expected directory structure:
```
/
â”œâ”€â”€ backend/           # FastAPI backend application
â”‚   â”œâ”€â”€ app/          # Main application code
â”‚   â”‚   â”œâ”€â”€ api/      # API endpoints
â”‚   â”‚   â”œâ”€â”€ models/   # SQLAlchemy models
â”‚   â”‚   â”œâ”€â”€ schemas/  # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ services/ # Business logic
â”‚   â”‚   â””â”€â”€ core/     # Core utilities (auth, config, etc.)
â”‚   â””â”€â”€ tests/        # Backend tests
â”œâ”€â”€ frontend/         # Next.js frontend application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/      # Next.js 14 app router
â”‚   â”‚   â”œâ”€â”€ components/ # React components
â”‚   â”‚   â”œâ”€â”€ contexts/ # React contexts
â”‚   â”‚   â”œâ”€â”€ hooks/    # Custom hooks
â”‚   â”‚   â””â”€â”€ lib/      # Utility functions
â”‚   â””â”€â”€ tests/        # Frontend tests
â””â”€â”€ è¦ä»¶å®šç¾©æ›¸.md      # Requirements documentation
```

## Development Commands (To Be Configured)

Since the project is not yet initialized, these are the expected commands once set up:

### Backend (FastAPI)
```bash
# Navigate to backend directory
cd backend

# Install dependencies
pip install -r requirements.txt

# Run development server
uvicorn app.main:app --reload --port 8000

# Supabase local setup
supabase init
supabase start

# Run tests
pytest

# Format code
black .

# Lint
flake8
```

### Frontend (Next.js)
```bash
# Navigate to frontend directory
cd frontend

# Install dependencies
npm install

# Install Supabase CLI
npm install @supabase/supabase-js

# Run development server
npm run dev

# Build for production
npm run build

# Run tests
npm test

# Lint
npm run lint

# Type check
npm run type-check
```

## Key Features to Implement

1. **User Registration & Application System**
   - Application form with Imabari city resident verification
   - Dog registration with vaccination records
   - Admin approval workflow

2. **Admin Dashboard**
   - User management
   - Application approval/rejection
   - Event management
   - Announcement management
   - Business hours configuration

3. **SNS/Feed Features**
   - Post creation with images and hashtags
   - Like and comment functionality
   - Content moderation

4. **Entry Management**
   - QR code generation for users
   - Check-in/check-out system
   - Real-time facility usage tracking

5. **Event System**
   - Calendar view
   - Event registration
   - Participant management

## Database Schema Overview

Main entities to implement:
- Users (with admin roles)
- Applications (registration requests)
- Dogs (with vaccination records)
- Posts (SNS content)
- Events
- Entry logs
- Announcements
- System settings

## Security Considerations

- JWT authentication for all API endpoints
- Password hashing with bcrypt
- CORS configuration for API
- Input validation and sanitization
- File upload restrictions for vaccination certificates

## Development Timeline

- **Phase 1 (Month 1)**: Requirements finalization, basic setup, development environment
- **Phase 2 (Month 2)**: Core features - authentication, application management, admin functions
- **Phase 3 (Month 3)**: Additional features - SNS, events, entry management, testing, deployment

## Important Notes

1. **Imabari City Focus**: This system is specifically for Imabari city residents, requiring residence verification in the application process.

2. **FC Imabari Brand Guidelines**: There's a brand guideline PDF (â˜…å¿…èª­ FCä»Šæ²»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ (3).pdf) that should be referenced for any UI/design work.

3. **MVP Approach**: Start with core functionality (user registration, admin approval, basic dog management) before implementing advanced features like SNS and QR code entry.

4. **Vercel/Supabase Deployment**: The system is designed for Vercel deployment with Supabase as the backend service. Ensure environment variables are properly configured for both platforms.

## Current Status

The project currently only contains:
- è¦ä»¶å®šç¾©æ›¸.md (Requirements documentation)
- FCä»Šæ²»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ PDF (Brand guidelines)

Next steps:
1. Initialize backend FastAPI project
2. Initialize frontend Next.js project  
3. Set up Supabase project and local development
4. Configure Vercel project settings
5. Implement authentication system with Supabase Auth
6. Create basic admin and user interfaces